{% extends "base.html" %}
{% block title %}Parking Lots{% endblock %}
{% block content %}
<h1 class="text-3xl font-bold text-blue-700 mb-8">üè¢ Available Parking Lots</h1>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {% for lot in lots %}
  <div class="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
    <h3 class="text-xl font-bold text-gray-800 mb-1">{{ lot.name }}</h3>
    <p class="text-gray-500 mb-1">üìç {{ lot.city }}</p>
    <p class="text-gray-400 text-sm mb-4">{{ lot.address }}</p>

    <!-- Slots inside this lot -->
    <div class="space-y-2">
      {% for slot in lot.slots.all %}
        {% if slot.is_active %}
        <div class="flex justify-between items-center bg-gray-50 rounded-xl px-4 py-3 border border-gray-100">
          <div>
            <p class="font-semibold text-gray-700">Slot {{ slot.slot_number }}</p>
            <p class="text-xs text-gray-400">{{ slot.slot_type }} ¬∑ ‚Çπ{{ slot.hourly_rate }}/hr</p>
          </div>
          {% if user.is_authenticated %}
            <a href="{% url 'book_slot' slot.id %}"
               class="bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 transition">
              Book Now
            </a>
          {% else %}
            <a href="{% url 'login' %}"
               class="bg-gray-400 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-gray-500 transition">
              Login to Book
            </a>
          {% endif %}
        </div>
        {% endif %}
      {% empty %}
        <p class="text-gray-400 text-sm text-center py-3">No slots available in this lot</p>
      {% endfor %}
    </div>

    <div class="mt-4 flex justify-between text-sm text-gray-500">
      <span>üü¢ {{ lot.slots.count }} total slots</span>
      <span>Owner: {{ lot.owner.username }}</span>
    </div>
  </div>
  {% empty %}
  <p class="col-span-3 text-center text-gray-500 text-xl py-20">No parking lots available yet.</p>
  {% endfor %}
</div>
{% endblock %}